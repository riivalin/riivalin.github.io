---
layout: post
title: "[C#] Serilog 初識"
date: 2023-02-28 00:00:00 +0800
categories: [Notes, NET, C#]
tags: [C#, Log, Serilog]
---

<span style="color: red">使用 Serilog 紀錄 Log (不用設定檔)</span>
1. Serilog 套件安裝
    - Serilog
    - Serilog.Sinks.Console (在指令視窗顯示)
    - Serilog.Sinks.File (寫入到檔案)
2. 初始化 Serilog
3. 程式結束時調用 Log.CloseAndFlush()


-----

## Serilog 使用
### 1. 安裝 Serilog 套件
使用 NuGet 安裝 Serilog 套件：
- Serilog
- Serilog.Sinks.Console 
- Serilog.Sinks.File

> 或是 Nuget Package Console 輸入指令：
> ```shell
> Install-Package Serilog
> Install-Package Serilog.Sinks.Console 
> Install-Package Serilog.Sinks.File
> ```

### 2. 初始化 Serilog

使用 var 宣告物件
```c#
var log = new LoggerConfiguration().WriteTo.Console().CreateLogger();
```

使用 Serilog 內建的靜態Log物件 (Log.Logger)
```c#
Log.Logger = new LoggerConfiguration().WriteTo.Console().CreateLogger();
```

### 3. 使用方式

- 最簡單的使用方式

```c#
using Serilog;

var log = new LoggerConfiguration() //使用 LoggerConfiguration 建立 ILogger 物件 
    .WriteTo.Console() //.WriteTo.Console() //使用 Console 輸出至主控台
    .CreateLogger(); //使用配置的 sink 接收器也就是 Console，新增 Logger 物件

log.Information("Hello, serilog.");
``` 

- 使用 Serilog 內置的靜態 Log 物件(Log.Logger)  
使用 Serilog 中提供的靜態 Log 物件，統一建立 Log 實體存放在 Serilog Log 的 Static Logger 中。

```c#
using Serilog;

Log.Logger = new LoggerConfiguration()
    .WriteTo.Console()
    .CreateLogger();

Log.Information("Hi, serilog");

Log.CloseAndFlush(); //在程式結束時呼叫 Log.CloseAndFlush() 來關閉它
```

### 4. Serilog LogEventLevel

Serilog 的 LogEventLevel 有6個層級，分別是 Verbose = 0, Debug = 1, Information = 2, Warning = 3, Error = 4, Fatal = 5

```c#
Log.Verbose("Hello, Verbose");
Log.Debug("This is debug.");
Log.Information("Hello, serilog.");
Log.Warning("Goodbye, Serilog.");
Log.Error("Something error.");
Log.Fatal("This is fatal");  
```

### 5. Log 寫入檔案

```c#

```
- [Serilog github](https://github.com/serilog/serilog)
- [Flexible, structured events — log file convenience.](https://serilog.net)